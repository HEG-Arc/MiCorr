{"version":3,"sources":["../ES2015/business/strata.js"],"names":["Strata","nature","child","natureFamilyAbbrev","label","dependencies","characteristics","subCharacteristics","childStrata","secondaryComponents","containers","init","i","length","getNature","family","filter","e","secondaryComponentIndex","property","inArrayProperty","c","find","getFamily","getFirstCharacteristicByFamily","splice","clearCharacteristicsFromFamily","getCharacteristicsByFamily","name","exists","getUid","subCharacteristic","push","characteristic","findIndex","replaceCharacteristic","childStratum","uid","elem","split","toUpperCase","undefined","index","dep","reIDep","RegExp","dependency","search","console","log","familyName","characteristicSource","dependencyName","findDependency","Characteristic","updateCharacteristic","characteristicList","cSource","addCharacteristic","elements","slice","setContainerElements","getContainerElements","subCharacteristicSource","sc","SubCharacteristic","replaceSubCharacteristic","updateSubCharacteristic","strataImage","interfaceImage","addDependency","jsonStrata","interfaces","children","isInterface","getName","toJson","all_component_characteristics","map","concat","Object","entries","symbol"],"mappings":"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","file":"strata.js","sourcesContent":["/**\n * Created by Thierry Hubmann\n *\n * Cette classe est développée en ES2015 et est recompilée avec Babel\n * C'est la classe business de la Strate\n */\n\nclass Strata {\n\n    constructor(nature, child) {\n        this.nature = nature;\n        this.natureFamilyAbbrev = null;\n        this.label = null;\n        this.dependencies = [];\n        this.characteristics = [];\n        this.subCharacteristics = [];\n        this.childStrata = [];\n        this.secondaryComponents = [{characteristics: [], subCharacteristics: [], containers: {}}];\n        this.containers = {}; //map of Element list\n        this.child = child;\n\n        this.init();\n\n\n    }\n\n\n    /**\n     * Retourne une strate enfant de la nature en paramètres\n     * @param nature la nature recherchée\n     * @returns la strate enfant\n     */\n    getChildStrataByNature(nature) {\n\n        for (var i = 0; i < this.childStrata.length; i++) {\n            if (this.childStrata[i].getNature() == nature) {\n                return this.childStrata[i];\n            }\n        }\n        return null;\n    }\n\n\n    /**\n     * Retourne les characteristiques correspondant à la famille donnée en paramètre\n     * @param family la famille recherchée\n     * @returns les characteristiques correspondante\n     */\n    getCharacteristicsByFamily(family) {\n        return this.characteristics.filter(e => e.family == family);\n    }\n\n    getSecondaryComponentCharacteristicsByFamily(family, secondaryComponentIndex=0) {\n        return this.secondaryComponents[secondaryComponentIndex].characteristics.filter(e => e.family == family);\n    }\n\n    /**\n     * Returns either first characteristic with requested family\n     * or its requested property\n     * @param family: characteristics's family searched\n     * @param property: (optional) property of the charasteric object requested\n     * @param inArrayProperty: (optional default to \"characteristics\") Array or name of the Array property in Strata where to search for characteristic\n     * @returns characteristic object / characteristic[property] value\n     */\n    getFirstCharacteristicByFamily(family, property, inArrayProperty=\"characteristics\") {\n        if (typeof(inArrayProperty)==\"string\")\n            inArrayProperty=this[inArrayProperty];\n        let c = inArrayProperty.find(e => e.getFamily() == family);\n        if (!property)\n            return c;\n        else {\n            if (c)\n                return c[property];\n            else\n                return c;\n        }\n    }\n    getFirstSecondaryComponentCharacteristicByFamily(family, property, secondaryComponentIndex=0) {\n        return this.getFirstCharacteristicByFamily(family, property, this.secondaryComponents[secondaryComponentIndex].characteristics)\n    }\n    /**\n     * Returns either first subCharacteristics with requested family\n     * or its requested property\n     * @param family: subCharacteristics's family searched\n     * @param property: (optional) property of the SubCharacteristic object requested\n     * @returns characteristic object / characteristic[property] value\n     */\n    getFirstSubCharacteristicByFamily(family, property) {\n        return this.getFirstCharacteristicByFamily(family, property, this.subCharacteristics);\n    }\n    getFirstSecondaryComponentSubCharacteristicByFamily(family, property,secondaryComponentIndex=0) {\n        return this.getFirstCharacteristicByFamily(family, property, this.secondaryComponents[secondaryComponentIndex].subCharacteristics);\n    }\n\n    /**\n     * Retourne les sous caractéristiques de la famille en paramètre\n     * @param family\n     * @returns {Array} liste de sous caractéristiques\n     */\n    getSubCharacteristicsByFamily(family) {\n        return this.subCharacteristics.filter(e => e.family == family);\n    }\n\n    getSecondaryComponentSubCharacteristicsByFamily(family, secondaryComponentIndex=0) {\n        return this.secondaryComponents[secondaryComponentIndex].subCharacteristics.filter(e => e.family == family);\n    }\n\n    /**\n     * Supprime toutes les characteristiques d'une famille\n     * @param family\n     */\n    clearCharacteristicsFromFamily(family, inArrayProperty ='characteristics') {\n        if (typeof(inArrayProperty)===\"string\")\n            inArrayProperty=this[inArrayProperty];\n        for (var i = 0; i < inArrayProperty.length; i++) {\n            if (inArrayProperty[i].getFamily() == family) {\n                inArrayProperty.splice(i, 1);\n                i--;\n            }\n        }\n    }\n\n    /**\n     * Supprime toutes les sous characteristiques d'une famille\n     * @param family\n     */\n    clearSubCharacteristicsFromFamily(family) {\n       this.clearCharacteristicsFromFamily(family,'subCharacteristics')\n    }\n\n    isFamily(family) {\n        return (this.getCharacteristicsByFamily(family).length > 0);\n    }\n\n    /**\n     * Cette méthode indique si une sous-caracterisitique existe dans une strate.\n     * @param le nom de la sous caracteristique à vérifier\n     * @returns boolean indiquant si la sous-caracteristique existe\n     */\n    isSubCharacteristic(name) {\n        var exists = false;\n        var i = 0;\n        while (exists == false && i < this.subCharacteristics.length) {\n            if (this.subCharacteristics[i].getUid() == name) {\n                exists = true;\n            }\n            i++;\n        }\n        return exists;\n    }\n\n    /**\n     * Ajoute une sous caractéristique sans vérifier si il en existe déjà une pour cette famille\n     * @param subCharacteristic\n     */\n    addSubCharacteristic(subCharacteristic) {\n        this.subCharacteristics.push(subCharacteristic);\n    }\n     /**\n     * Remplace une sous caractéristique de la famille de celle donnée en paramètre\n     * @param characteristic / subcharacteristic\n      * inArrayProperty (\"characteristics\", \"subCharacteristics\", etc..)\n     */\n    replaceCharacteristic(characteristic, inArrayProperty=\"characteristics\") {\n        //todo refactoring switch characteristics and subCharacteristics to Map instead of Array\n        if (typeof(inArrayProperty)===\"string\")\n            inArrayProperty=this[inArrayProperty];\n        var i = inArrayProperty.findIndex(e => e.family == characteristic.family );\n        if (i==-1)\n            inArrayProperty.push(characteristic);\n        else\n            inArrayProperty[i] = characteristic;\n    }\n\n    /**\n     * Remplace une sous caractéristique de la famille de celle donnée en paramètre\n     * @param subCharacteristic\n     */\n    replaceSubCharacteristic(subCharacteristic,inArrayProperty=\"subCharacteristics\") {\n        this.replaceCharacteristic(subCharacteristic, inArrayProperty);\n    }\n\n    addCharacteristic(characteristic,inArrayProperty=\"characteristics\") {\n        if (typeof(inArrayProperty)===\"string\")\n            inArrayProperty=this[inArrayProperty];\n        inArrayProperty.push(characteristic);\n    }\n\n    addChildStrata(childStratum) {\n        this.childStrata.push(childStratum);\n    }\n\n    /**\n     * Permet de savoir si la strate est une strate enfant.\n     * @returns Un booleen qui indique si c'est une strate enfant\n     */\n    isChild() {\n        return this.child;\n    }\n\n    /**\n     * Permet d'indiquer que la strate est une strate enfant\n     * @param child\n     */\n    setChild(child) {\n        this.child = child;\n    }\n\n\n    removeCharacteristic(uid) {\n\n    }\n\n    removeSubCharacteristic(uid) {\n\n    }\n\n    getSubCharacteristics() {\n        return this.subCharacteristics;\n    }\n\n    getCharacteristics() {\n        return this.characteristics;\n    }\n\n\n    getNature() {\n        return this.nature;\n    }\n\n    setNature(nature) {\n        this.nature = nature;\n    }\n\n    /**\n     * Return natureFamily abbreviation (or prefix) of the stratum (e.g. CP for Corrosion products)\n     */\n    getNatureFamilyAbbrev() {\n        if (this.characteristics)\n            this.natureFamilyAbbrev = this.natureFamilyAbbrev || this.characteristics.find(elem => elem.family == \"natureFamily\").name.split(\"Char\")[0].toUpperCase();\n        return this.natureFamilyAbbrev || \"\";\n    }\n\n    /**\n     * setter for label called by Stratigraphy object based on position of stratum in the stratigraphy\n     * and its NatureFamilyAbbrev (e.g: CP2, MC1...)\n     */\n    setLabel(label) {\n        this.label = label;\n    }\n\n    getLabel() {\n        return (this.label);\n    }\n\n    getUid() {\n        return this.uid;\n    }\n\n    setUid(uid) {\n        this.uid = uid;\n    }\n\n    getName() {\n        if (this.name == undefined) {\n            return this.uid;\n        }\n        else {\n            return this.name;\n        }\n    }\n\n    setName(name) {\n        this.name = name;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    setIndex(index) {\n        this.index = index;\n    }\n    addDependency(dep) {\n        this.dependencies.push(dep);\n    }\n    findDependency(dep) {\n        // temp use of case insensitive match before refactoring and using Map instead of list\n        // because of unwanted case differences between Family and dependency key. For ex.\n        // cprimicrostructureaggregatecompositionFamily vs cpriMicrostructureAggregateCompositionFamily\n\n        let reIDep = new RegExp(\"^\" + dep + \"$\", \"i\") ;\n        for (let dependency of this.dependencies) {\n            if (dependency.search(reIDep) == 0)\n            {\n                if (dependency!=dep)\n                    console.log('findDependency('+dep+')='+dependency);\n                return true;\n            }\n\n        }\n        return false;\n    }\n    /**\n     * Helper methods to update stratum Characteristic from controller scope variables\n     * @returns true if characteristic has been updated based on stratum dependency and characteristicSource\n     */\n    updateCharacteristic(familyName, characteristicSource, dependencyName=null, inArrayProperty=\"characteristics\")\n    {\n        dependencyName = dependencyName || familyName; //dependencyName defaults to familyName but could be different\n        if (characteristicSource && this.findDependency(dependencyName)) {\n            let c = new characteristic.Characteristic(familyName, characteristicSource);\n            this.replaceCharacteristic(c, inArrayProperty);\n            return true;\n        }\n        return false;\n    }\n    updateSecondaryComponentCharacteristic(familyName, characteristicSource, dependencyName, secondaryComponentIndex=0)\n    {\n        return this.updateCharacteristic(familyName, characteristicSource, dependencyName, this.secondaryComponents[secondaryComponentIndex].characteristics);\n    }\n\n    updateCharacteristicList(familyName, characteristicList, dependencyName=null,  inArrayProperty=\"characteristics\") {\n        dependencyName = dependencyName || familyName; //dependencyName defaults to familyName but could be different\n        if (typeof(inArrayProperty)===\"string\")\n            inArrayProperty=this[inArrayProperty];\n        if (this.findDependency(familyName)) {\n            this.clearCharacteristicsFromFamily(familyName, inArrayProperty);\n            for (let cSource of characteristicList)\n                this.addCharacteristic(new characteristic.Characteristic(familyName, cSource));\n            return true;\n        }\n        return false;\n    }\n    updateSecondaryComponentCharacteristicList(familyName, characteristicList, dependencyName, secondaryComponentIndex=0){\n        if (this.findDependency(dependencyName)) {\n            this.clearCharacteristicsFromFamily(familyName, this.secondaryComponents[0].characteristics);\n            for (let cSource of characteristicList)\n                this.addCharacteristic(new characteristic.Characteristic(familyName, cSource), this.secondaryComponents[0].characteristics);\n            return true;\n        }\n        return false;\n    }\n\n    setContainerElements(familyName, elements, containers=null) {\n        // default target containers is this.containers\n        containers = containers || this.containers;\n        if (this.findDependency(familyName)) {\n            containers[familyName]=elements.slice();\n            return true;\n        }\n        return false;\n    }\n    getContainerElements(familyName, containers=null) {\n        // default source containers is this.containers\n        containers = containers || this.containers;\n        if (familyName in containers)\n            return containers[familyName];\n        else\n            return [];\n    }\n\n    setSecondaryComponentContainerElements(familyName, elements, secondaryComponentIndex = 0) {\n        return this.setContainerElements(familyName, elements, this.secondaryComponents[secondaryComponentIndex]);\n    }\n\n    getSecondaryComponentContainerElements(familyName, secondaryComponentIndex = 0) {\n        return this.getContainerElements(familyName, this.secondaryComponents[secondaryComponentIndex]);\n    }\n\n    updateSubCharacteristic(familyName, subCharacteristicSource, dependencyName=null, inArrayProperty=\"subCharacteristics\") {\n        dependencyName = dependencyName || familyName; //dependencyName defaults to familyName but could be different\n        if (subCharacteristicSource && this.findDependency(dependencyName)) {\n            let sc = new subCharacteristic.SubCharacteristic(familyName, subCharacteristicSource);\n            this.replaceSubCharacteristic(sc, inArrayProperty);\n            return true;\n        }\n        return false;\n    }\n    updateSecondaryComponentSubCharacteristic(familyName, subCharacteristicSource, dependencyName, secondaryComponentIndex=0)\n    {\n        return this.updateSubCharacteristic(familyName, subCharacteristicSource, dependencyName, this.secondaryComponents[secondaryComponentIndex].subCharacteristics);\n    }\n\n    /**\n     * Permet d'enregistrer le dessin SVG.JS d'une image pour éviter de la redessiner à chaque fois\n     */\n    setStrataImage(strataImage) {\n        this.strataImage = strataImage;\n    }\n\n    getStrataImage() {\n        return this.strataImage;\n    }\n\n    setInterfaceImage(interfaceImage) {\n        this.interfaceImage = interfaceImage;\n    }\n\n    getInterfaceImage() {\n        return this.interfaceImage;\n    }\n\n\n    /**\n     * Cette méthode initialise la strate en ajoutant à un tableau les propriétés modifiables\n     * et en lui attribuant des valeurs par défaut\n     */\n    init() {\n\n        this.addDependency('thicknessFamily');\n        this.addDependency('widthFamily');\n        this.addDependency('continuityFamily');\n        this.addDependency('directionFamily');\n\n        //Les strates CM n'ont pas d'interface\n        if (this.nature != \"Corroded metal\") {\n            this.addDependency('interfaceprofileFamily');\n        }\n\n        if (this.nature == \"Soil\") {\n\n            this.addDependency('colourFamily');\n            this.addDependency('brightnessFamily');\n            this.addDependency('opacityFamily');\n            this.addDependency('magnetismFamily');\n            this.addDependency('porosityFamily');\n            this.addDependency('cohesionFamily');\n            this.addDependency('hardnessFamily');\n            this.addDependency('crackingFamily');\n            this.addDependency('scompositionFamily');\n            this.addDependency('interfacetransitionFamily');\n            this.addDependency('interfaceroughnessFamily');\n            this.addDependency('interfaceadherenceFamily');\n        }\n\n        if (this.nature == \"Non-Metallic material\") {\n            this.addDependency('colourFamily');\n            this.addDependency('brightnessFamily');\n            this.addDependency('opacityFamily');\n            this.addDependency('magnetismFamily');\n            this.addDependency('porosityFamily');\n            this.addDependency('cohesionFamily');\n            this.addDependency('hardnessFamily');\n            this.addDependency('crackingFamily');\n            this.addDependency('nmmcompositionFamily');\n            this.addDependency('interfacetransitionFamily');\n            this.addDependency('interfaceroughnessFamily');\n            this.addDependency('interfaceadherenceFamily');\n        }\n\n\n        if (this.nature == \"Deposit\") {\n\n            this.addDependency('colourFamily');\n            this.addDependency('brightnessFamily');\n            this.addDependency('opacityFamily');\n            this.addDependency('magnetismFamily');\n            this.addDependency('porosityFamily');\n            this.addDependency('cohesionFamily');\n            this.addDependency('hardnessFamily');\n            this.addDependency('crackingFamily');\n            this.addDependency('dcompositionFamily');\n            this.addDependency('interfacetransitionFamily');\n            this.addDependency('interfaceroughnessFamily');\n            this.addDependency('interfaceadherenceFamily');\n        }\n\n        if (this.nature == \"Pseudomorph of organic material\") {\n            this.addDependency('colourFamily');\n            this.addDependency('brightnessFamily');\n            this.addDependency('opacityFamily');\n            this.addDependency('magnetismFamily');\n            this.addDependency('porosityFamily');\n            this.addDependency('cohesionFamily');\n            this.addDependency('hardnessFamily');\n            this.addDependency('crackingFamily');\n            this.addDependency('pomcompositionFamily');\n            this.addDependency('pomCompositionMetallicPollutants');\n            this.addDependency('interfacetransitionFamily');\n            this.addDependency('interfaceroughnessFamily');\n            this.addDependency('interfaceadherenceFamily');\n        }\n\n        if (this.nature == \"Corrosion products\") {\n            this.addDependency('colourFamily');\n            this.addDependency('brightnessFamily');\n            this.addDependency('opacityFamily');\n            this.addDependency('magnetismFamily');\n            this.addDependency('porosityFamily');\n            this.addDependency('cohesionFamily');\n            this.addDependency('hardnessFamily');\n            this.addDependency('crackingFamily');\n            this.addDependency('interfacetransitionFamily');\n            this.addDependency('interfaceroughnessFamily');\n            this.addDependency('interfaceadherenceFamily');\n            this.addDependency('cpcompositionextensionFamily');\n            this.addDependency('cpCompositionMainElements');\n            this.addDependency('cpCompositionSecondaryElements');\n            this.addDependency('cpCompositionCompounds');\n            this.addDependency('cpCompositionAdditionalElements');\n\n            this.addDependency('cprimicrostructureFamily');\n            this.addDependency('cprimicrostructureaggregatecompositionFamily');\n            this.addDependency('cprimicrostructureaggregatecompositionextensionFamily');\n            this.addDependency('subcprimicrostructureFamily');\n            this.addDependency('subcprimicrostructureaggregatecompositionFamily');\n            this.addDependency('subsubcprimicrostructureaggregatecompositionFamily');\n            // => to be replaced by:\n            //cp Secondary Components dependencies\n            this.addDependency('cpSdyCptMainElements');\n            this.addDependency('cpSdyCptSecondaryElements');\n            this.addDependency('cpSdyCptCompounds');\n            this.addDependency('cpSdyCptAdditionalElements');\n\n        }\n\n        if (this.nature == \"Metal\") {\n\n            this.addDependency('colourFamily');\n            this.addDependency('brightnessFamily');\n            this.addDependency('opacityFamily');\n            this.addDependency('magnetismFamily');\n            this.addDependency('porosityFamily');\n            this.addDependency('mmicrostructureFamily');\n            this.addDependency('cohesionFamily');\n            this.addDependency('hardnessFamily');\n            this.addDependency('crackingFamily');\n            this.addDependency('mCompositionMainElements');\n            this.addDependency('mCompositionSecondaryElements');\n            this.addDependency('interfacetransitionFamily');\n            this.addDependency('interfaceroughnessFamily');\n            this.addDependency('interfaceadherenceFamily');\n            this.addDependency('submmicrostructureFamily');\n        }\n\n\n    }\n\n    toJson() {\n        var childStrata = [],i;\n\n        var jsonStrata = {\n            name: this.getUid(), characteristics: [], interfaces: [], children: [], secondaryComponents: [],\n            containers: {}\n        };\n\n        //On récupère les caractéristiques\n        for (i = 0; i < this.characteristics.length; i++) {\n            if (!this.characteristics[i].isInterface()) {\n                jsonStrata.characteristics.push({name: this.characteristics[i].getName()});\n            }\n        }\n        //On récupère les sous caractéristiques\n        for (i = 0; i < this.subCharacteristics.length; i++) {\n            jsonStrata.characteristics.push({name: this.subCharacteristics[i].getUid()});\n        }\n\n        //On récupère les caractéristiques d'interface\n        for (i = 0; i < this.characteristics.length; i++) {\n            if (this.characteristics[i].isInterface()) {\n                jsonStrata.interfaces.push({name: this.characteristics[i].getName()});\n            }\n        }\n\n        //On récupère les strates enfants si ce n'est pas une strate enfant\n        if (!this.child) {\n            for (i = 0; i < this.childStrata.length; i++) {\n                jsonStrata.children.push(this.childStrata[i].toJson());\n            }\n        }\n        // secondaryComponents\n        for (let sc of this.secondaryComponents) {\n            let all_component_characteristics = sc.characteristics.map(c => ({name: c.getName()})\n            ).concat(sc.subCharacteristics.map(sc => ({name: sc.getUid()})));\n            if (all_component_characteristics.length)\n                jsonStrata.secondaryComponents.push(all_component_characteristics);\n        }\n        // containers\n        for (let [family,elements] of Object.entries(this.containers)) {\n            jsonStrata.containers[family]=elements.map(e => {if (e.symbol) return {name: e.symbol}; else return {name: e.name}; } );\n        }\n        return jsonStrata;\n\n    }\n\n\n}\n\nexport {Strata};\n"]}