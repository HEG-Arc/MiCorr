# -*- coding: utf-8 -*-
# Generated by Django 1.11.6 on 2017-10-31 10:05


from django.db import migrations

#Adding first set of node descriptions as per MC-202 (to be maintained via wagtail admin snippets)

NODE_DESCRIPTIONS = [{'label': 'Family',
            'name': 'Shape',
            'text': 'Geometry of the stratum. The list of possible shapes is self-explanatory except perhaps cloud (very thin layer that allows to see the stratum below). Only one option is made visible: layer/film/coating.',
            'uid': 'shapeFamily'},
           {'label': 'Family',
            'name': 'Magnetism',
            'text': 'two options are possible (magnetic or non magnetic) but are not visible. Fe, Ni, Co are normally magnetic but not stainless steel.',
            'uid': 'magnetismFamily'},
           {'label': 'Family',
            'name': 'Thickness',
            'text': 'Three options are possible (thin, medium and thick) and are made visible. When adding a new stratum, the thickness is automatically medium. The user has to select another thickness if needed. When ignoring the thickness of a stratum, choose the most appropriate option: thin \\u201cM\\u201d in case of an archaeological metal with almost no metal left, medium \\u201cM\\u201d for historical metals, etc. Thicknesses of other strata are deduced from the first stratum of the corrosion structure.',
            'uid': 'thicknessFamily'},
           {'label': 'Family',
            'name': 'Width',
            'text': 'Three options are possible (small, medium, large) and are made visible. When adding a new stratum, the width is automatically medium. The user has to select another width if needed.',
            'uid': 'widthFamily'},
           {'label': 'Family',
            'name': 'Direction',
            'text': 'Direction of the stratum in the whole stratigraphy. Although the direction can be longitudinal, transversal or oblique, only the longitudinal option is made visible.',
            'uid': 'directionFamily'},
           {'label': 'Family',
            'name': 'Continuity',
            'text': 'Either the stratum is continuous, divided in one, two or three major elements, isolated or scattered. Only the continuous option is made visible.',
            'uid': 'continuityFamily'},
           {'label': 'Family',
            'name': 'Brightness',
            'text': 'Combines both lustre / brightness. None of the option is made visible. The list of options is self-explanatory except perhaps submetallic (presents areas that are more or less shiny even if the angle of vision changes) and adamantine (shiny like a diamond).',
            'uid': 'brightnessFamily'},
           {'label': 'Family',
            'name': 'Colour',
            'text': 'Options from a colour chart is self-explanatory. Colours are made visible. Colours of strata are those observed visually or from a micrograph observed with a polarised microscope for corrosion layers and in bright field for the metal stratum.',
            'uid': 'colourFamily'},
           {'label': 'Family',
            'name': 'Opacity',
            'text': 'Three options are possible (opaque, translucent, transparent) but only the opaque option is made visible. a \\u201cM\\u201d stratum is normally opaque.',
            'uid': 'opacityFamily'},
           {'label': 'FamilyGroup',
            'name': 'Morphology',
            'text': 'General geometry of a stratum (shape, thickness, width, direction, continuity) with information on interaction light & environment / material (brightness, colour, opacity and magnetism)',
            'uid': 'fgMorphology'},
           {'label': 'FamilyGroup',
            'name': 'Microstructure',
            'text': 'Internal organisation of a stratum.',
            'uid': 'fgMicrostructure'},
           {'label': 'FamilyGroup',
            'name': 'Texture',
            'text': 'Physical properties of a stratum (compactness, hardness, cohesion, cracking)',
            'uid': 'fgTexture'},
           {'label': 'FamilyGroup',
            'name': 'Composition',
            'text': 'Chemical nature of the stratum',
            'uid': 'fgComposition'},
           {'label': 'FamilyGroup',
            'name': 'Interface',
            'text': 'Relation between the stratum and the next stratum above (profile, roughness, transition, adherence)',
            'uid': 'fgInterface'},
           {'label': 'Family',
            'name': 'M Microstructure',
            'text': 'Several options are possible (dendrites (deformed or not), grains (large, small, elongated), no microstructure) with sub-options. The size of the grains is given when available from a micrograph. All options are made visible. A cast object has normally a dendritic microstructure while a forged metal a grain microstructure. A laminated sheet should have elongated grains except if it was annealed. Grey cast iron has graphite lamellas.',
            'uid': 'mMicrostructureFamily'},
           {'label': 'Family',
            'name': 'CM Additionnal Microstructure',
            'text': 'two options are possible (isolated aggregate microstructure, lenticular, no microstructure, scattered aggregate microstructure) in the CP part of the CM. All options are made visible (?)',
            'uid': 'cmCpMicrostructureFamily'},
           {'label': 'Family',
            'name': 'CP Microstructure',
            'text': 'Several options are possible (alternating bands, crystalline microstructure, pseudomorph of dendritic microstructure, pseudomorph of granular microstructure, pseudomorph of organic material (POM), hexagonal network, isolated aggregate microstructure, lenticular, no microstructure, non-metallic material (NMM), scattered aggregate microstructure, structured void (SV)). All options are made visible except lenticular.',
            'uid': 'cpriMicrostructureFamily'},
           {'label': 'Family',
            'name': 'Compactness',
            'text': 'Four options are possible (compact, slightly porous, porous, highly porous) and are made visible. Visually, the number of pores (\\uf0b7) is increasing from slightly to highly porous). Pores are described by their size (nm) and their surface density on a micrograph.',
            'uid': 'porosityFamily'},
           {'label': 'Family',
            'name': 'Hardness',
            'text': 'Four options are possible (very soft, soft, hard, very hard) depending on Vickers hardness (micro) or Brinell hardness (macro). These sub-characteristics are not made visible.',
            'uid': 'hardnessFamily'},
           {'label': 'Family',
            'name': 'Cohesion',
            'text': 'The list of options (powdery, friable, brittle, severable, malleable, tough) is self-explanatory. Only the powdery option is made visible.',
            'uid': 'cohesionFamily'},
           {'label': 'Family',
            'name': 'Cracking',
            'text': 'Four options are possible (simple crack, branched cracks, network of cracks, no crack). All options are made visible.',
            'uid': 'crackingFamily'},
           {'label': 'Family',
            'name': 'Profile',
            'text': 'four options are possible (straight, wavy, bumpy and irregular). They are made visible.',
            'uid': 'profileFamily'},
           {'label': 'Family',
            'name': 'Roughness',
            'text': 'four options are possible (smooth, slightly rough, rough, uneven). These sub-characteristics are not made visible. ',
            'uid': 'roughnessFamily'},
           {'label': 'Family',
            'name': 'Transition',
            'text': 'five options are possible (sharp, diffuse, semi gradual superior, semi gradual inferior, gradual). Only the graduals options are made visible. ',
            'uid': 'transitionFamily'},
           {'label': 'Family',
            'name': 'Adherence',
            'text': 'four options are possible (inseparable, adherent, loosely, non-adherent). None of these options are made visible.',
            'uid': 'interfaceAdherenceFamily'},
           # extra new ones
           {'label': 'Family',
            'name': 'CP Sub-microstructure available sub-characteristics',
            'text': 'Four sub-characteristics (Cementite / perlite phase, Eutectic phase, Ferritic phase, Ferrito-perlitic phase, Graphite lamellas, Inclusions (Elongated & Multidirections), Newmann bands, Quenched phase, Slip lines and Twin lines) are available for each microstructure. Once selected these sub-characteristics have to be transferred with the arrow in the box \\u201cchosen sub-characteristics to make them visible.',
            'uid': 'subcprimicrostructureFamily'},
           {'label': 'Family',
            'name': 'M Sub-microstructure available sub-characteristics',
            'text': 'Several sub-characteristics (Cementite / perlite phase, Eutectic phase, Ferritic phase, Ferrito-perlitic phase, Graphite lamellas, Inclusions (Elongated & Multidirections), Newmann bands, Quenched phase, Slip lines and Twin lines) are available. Once selected these sub-characteristics have to be transferred with the arrow in the box \\u201cchosen sub-characteristics to make them visible.',
            'uid': 'submmicrostructureFamily'},
           {'label': 'Family',
            'name': 'M Main element',
            'text': 'Only one element might be chosen among the existing list, even with binary alloys with elements having the same content.',
            'uid': 'mcompositionFamily'},
           {'label': 'Family',
            'name': 'CP Main element',
            'text': 'Only one element might be chosen among the existing list, even with binary alloys with elements having the same content.',
            'uid': 'cpcompositionFamily'},
           {'label': 'Family',
            'name': 'M additional element(s) available sub-characteristics',
            'text': 'Secondary elements. They depend on the nature of the main element.',
            'uid': 'submcompositionFamily'},
           {'label': 'Family',
            'name': 'CP Secondary element(s)',
            'text': 'They depend on the nature of the main element.',
            'uid': 'subcpcompositionFamily'},
           {'label': 'Family',
            'name': 'CP Compound',
            'text': 'Formula of the CP deduced from its main and secondary elements.',
            'uid': 'subsubcpcompositionFamily'},
           {'label': 'Family',
            'name': 'CP Additional element(s) available sub-characteristics',
            'text': 'select the corresponding elements. Once selected these sub-characteristics have to be transferred with the arrow in the box \\u201cchosen sub-characteristics.',
            'uid': 'cpcompositionextensionFamily'},
           {'label': 'Family',
            'name': 'CM Additional elements in M available sub-characteristics',
            'text': 'Select the corresponding elements. Once selected these sub-characteristics have to be transferred with the arrow in the box \\u201cchosen sub-characteristics.',
            'uid': 'cmmcompositionFamily'},
           {'label': 'Family',
            'name': 'CM Additional elements in CP available sub-characteristics',
            'text': 'Select the corresponding elements. Once selected these sub-characteristics have to be transferred with the arrow in the box \\u201cchosen sub-characteristics.',
            'uid': 'cmcpcompositionFamily'},
           {'label': 'Family',
            'name': 'Additional element(s) in CP aggregates  available sub-characteristics',
            'text': 'Select the corresponding elements. Once selected these sub-characteristics have to be transferred with the arrow in the box \\u201cchosen sub-characteristics.',
            'uid': 'cmcpaggregateCompositionFamily'},
           {'label': 'Family',
            'name': 'CM M/CP Ratio',
            'text': 'Select the proper ratio M/CP. Three options exist: if the cursor is on the left, the ratio M/CP is low, if the cursor is in the centre, the ratio M/CP has an average value, if the cursor is on the right, the ratio M/CP is high.',
            'uid': 'mcpRatio'}
           ]


def add_node_descriptions(apps, schema_editor):
    NodeDescription = apps.get_model('stratigraphies', 'NodeDescription')
    for rec in NODE_DESCRIPTIONS:
        NodeDescription.objects.update_or_create(uid=rec.pop('uid'),defaults=rec)


def remove_node_descriptions(apps, schema_editor):
    NodeDescription = apps.get_model('stratigraphies', 'NodeDescription')
    NodeDescription.objects.filter(uid__in=[r['uid'] for r in NODE_DESCRIPTIONS]).delete()


class Migration(migrations.Migration):

    dependencies = [
        ('stratigraphies', '0002_alter_nodedescription_fields'),
    ]

    operations = [
        migrations.RunPython(add_node_descriptions, remove_node_descriptions)
    ]
